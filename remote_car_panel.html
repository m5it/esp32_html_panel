<arduino>
{"setups":[{"gpio":27,"action":"mode", "value":"OUTPUT"},{"gpio":14,"action":"mode", "value":"OUTPUT"},{"gpio":13,"action":"mode", "value":"OUTPUT"}], "tasks":[{"title":"Start motor A","request":"/MOTOR_A_ON", "actions":[{"gpio":27,"value":0,"type":"DW"},{"gpio":14,"value":1,"type":"DW"},{"gpio":13,"value":130,"type":"AW"}]},{"title":"Stop motor A","request":"/MOTOR_A_OFF", "actions":[{"gpio":27,"value":0,"type":"DW"},{"gpio":14,"value":0,"type":"DW"}]},{"title":"Check battery level","request":"/BATTERY_LEVEL", "actions":[{"gpio":34,"value":0,"type":"AR"}]}]}
</arduino>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<title>remote car panel</title>
		<style>
		.leftSide {}
		.leftSide .circle {
			border-radius:60px;
			border:solid 5px black;
		}
		.rightSide {}
		</style>

<script>
function Fetch( opt ) {
	var href="";
	if( typeof(opt)!='undefined' && typeof(opt['href'])!='undefined' ) {
		href = opt.href;
	}
	else return;
	
	console.info("Fetch() using href",href);
	
	fetch(href, {  
	    method :'GET',  
    }).then(function (data) {
		return data.json();
	}).then(function(json) {
		//
		if( typeof(opt)!='undefined' && typeof(opt["onDone"])=='function' ) {
			opt.onDone( json );
		}
		else {
			console.warn("Fetch() opt.onDone() not defined!",json);
		}
	});
}
function onLoad(e) {
	if( document.location.pathname!="/" || document.location.search!="" ) {
		window.history.replaceState({},"","/");
	}
}
window.onload = function(e) { onLoad(e); }
</script>
	</head>
	
	<body>
		
		<div align="center"><h3>Example of simple html control panel for Arduino or ESP32...</h3></div>
		
		<br>
		
		<a href="/MOTOR_A_ON" onclick="Fetch({href:this.href,onDone:function(json){console.info('start motor data: ',json);},});return false;">Start motor A</a> <br>
		<a href="/MOTOR_A_OFF" onclick="Fetch({href:this.href,onDone:function(json){console.info('stop motor data: ',json);},});return false;">Stop motor A</a> <br>
		<a href="/BATTERY_LEVEL" onclick="Fetch({href:this.href,onDone:function(json){console.info('battery level data: ',json);},});return false;">Check Battery Level</a> <br>
		
		<!-- left side is used to move car left and right -->
		<div class="leftSide">
			<div class="circle"></div>
		</div>
		
		<!-- right side is used to move car infront and back -->
		<div class="rightSide">
		</div>
	</body>
</html>
